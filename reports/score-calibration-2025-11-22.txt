üîç Vector Search Score Calibration Test
================================================================================

Testing whether similarity scores correctly distinguish relevant from irrelevant results.


üìù Test Case: Strong coverage - should have many high-scoring results
   Expected: STRONG coverage


================================================================================
Query: "China semiconductor export controls"
================================================================================

Top 10 Results (ranked by similarity):

[1] ‚úÖ Similarity: 0.8307 (distance: 0.1693)
    Subject: PRC expands export controls; Soft holiday spending; Li Qiang in DPRK
    From: null 
    Date: [object Object]
    Preview: s entire technology industry at risk, given it is extremely reliant on chips made with US equipment....
    Assessment: RELEVANT

[2] ‚úÖ Similarity: 0.8260 (distance: 0.1740)
    Subject: Politburo meeting and CEWC; Nvidia antitrust investigation; Trump and China; TikTok's narrowin path in US
    From: null 
    Date: [object Object]
    Preview: e plans who were not authorized to speak publicly.The new rule would build on letters that the U. S....
    Assessment: RELEVANT

[3] ‚úÖ Similarity: 0.8222 (distance: 0.1778)
    Subject: China-CELAC Forum; Xi and Lula; More policy support for tech financing; Solar shutdown risk?Huawei chips; Death by‚Ä¶
    From: null 
    Date: [object Object]
    Preview: lone supplying it overseas," Cheng, who has tracked the chip industry for decades, told Nikkei Asia....
    Assessment: RELEVANT

[4] ‚ö†Ô∏è Similarity: 0.8204 (distance: 0.1796)
    Subject: Covid cases rising as People's Daily calls for patience with Dynamic zero-Covid policy; The Navigator; US tech con‚Ä¶
    From: null 
    Date: [object Object]
    Preview: allied nations would implement similar measures and that discussions with those nations are ongoing....
    Assessment: SOMEWHAT

[5] ‚úÖ Similarity: 0.8177 (distance: 0.1823)
    Subject: 2023 Weekly Discussion Thread #15: Yellen's China speech; Support for private business; "Xivilization"; Twitter
    From: null 
    Date: [object Object]
    Preview:  whole world. We will closely follow the developments and firmly safeguard our rights and interests....
    Assessment: RELEVANT

[6] ‚ö†Ô∏è Similarity: 0.8176 (distance: 0.1824)
    Subject: üü° Advice and consent
    From: null 
    Date: [object Object]
    Preview: ort of semiconductor making equipment and high-bandwidth memory chips from US and foreign companies....
    Assessment: SOMEWHAT

[7] ‚úÖ Similarity: 0.8163 (distance: 0.1837)
    Subject: Belt and Road Forum concludes; Xi meets Putin; Q3 GDP; Reactions to updated semiconductor controls
    From: null 
    Date: [object Object]
    Preview: Â≠óÂõΩÈôÖÂßîÂëò‰ºöÁ≠âÂõΩÈôÖÁªÑÁªá‰πüÂØπÂä†Ê≤ôÂüéÂåªÈô¢ÈÅ≠Ë¢≠‰∫ã‰ª∂Ë°®Á§∫Ë∞¥Ë¥£ÔºåÂëºÂêÅÂõΩÈôÖÁ§æ‰ºöÂ∞ΩÂø´Âà∂Ê≠¢ÂÜ≤Á™ÅÂíåÊµÅË°Ä‰∫ã‰ª∂„ÄÇ7. More on the updated chip controlsChina opposes U. S....
    Assessment: RELEVANT

[8] ‚úÖ Similarity: 0.8161 (distance: 0.1839)
    Subject: Special Edition Global SitRep -7-December
    From: null 
    Date: [object Object]
    Preview:  third crackdown in three years on China's semiconductor industry, curbing exports to 140 companies....
    Assessment: RELEVANT

[9] ‚úÖ Similarity: 0.8152 (distance: 0.1848)
    Subject: No mention of November Politburo meeting; US updates chip controls; Xi on the BRI; Lai in Hawaii; Miao Hua; US-Chi‚Ä¶
    From: null 
    Date: [object Object]
    Preview: g export control measures, and implementing unilateral bullying behavior. China firmly opposes this....
    Assessment: RELEVANT

[10] ‚ö†Ô∏è Similarity: 0.8145 (distance: 0.1855)
    Subject: Chip wars, deglobalization, a maverick economist & Russia reorienting
    From: null 
    Date: [object Object]
    Preview: chips for artificial intelligence applications and advanced chipmaking equipment to Chinese firms ‚Ä¶....
    Assessment: SOMEWHAT


üìä Score Distribution Analysis

Relevance Distribution:
  ‚úÖ Relevant: 7 / 10
  ‚ö†Ô∏è Somewhat: 3 / 10
  ‚ùå Irrelevant: 0 / 10

‚úÖ Relevant chunks - Similarity scores:
   Range: 0.8152 - 0.8307
   Average: 0.8206

‚ö†Ô∏è Somewhat relevant - Similarity scores:
   Range: 0.8145 - 0.8204
   Average: 0.8175

--------------------------------------------------------------------------------

üìù Test Case: Weak coverage - few high scores, many low scores
   Expected: WEAK coverage


================================================================================
Query: "artificial intelligence regulation European Union"
================================================================================

Top 10 Results (ranked by similarity):

[1] ‚ö†Ô∏è Similarity: 0.8549 (distance: 0.1451)
    Subject: EU to Recalibrate AI Regulation Approach
    From: null 
    Date: [object Object]
    Preview: e AI Act classifies technologies into three categories based on the risks they pose to human safety....
    Assessment: SOMEWHAT

[2] ‚ùå Similarity: 0.8530 (distance: 0.1470)
    Subject: EU AI Act Adopted Today | WIPO: International Patent Filing Office Sees Growth in Applications from India | ILO to‚Ä¶
    From: null 
    Date: [object Object]
    Preview: n in robot-assisted surgery); employment, management of workers and access to self-employment (e. g....
    Assessment: IRRELEVANT

[3] ‚úÖ Similarity: 0.8488 (distance: 0.1512)
    Subject: Marathon negotiations on AI
    From: null 
    Date: [object Object]
    Preview:  likelihood, the AI Act will be approved as agreed upon at the negotiations at the end of last week....
    Assessment: RELEVANT

[4] ‚ö†Ô∏è Similarity: 0.8412 (distance: 0.1588)
    Subject: EU AI Act Adopted Today | WIPO: International Patent Filing Office Sees Growth in Applications from India | ILO to‚Ä¶
    From: null 
    Date: [object Object]
    Preview: rovides some protection, it is insufficient to address the specific challenges AI systems may bring....
    Assessment: SOMEWHAT

[5] ‚ö†Ô∏è Similarity: 0.8401 (distance: 0.1599)
    Subject: EU AI Act Adopted Today | WIPO: International Patent Filing Office Sees Growth in Applications from India | ILO to‚Ä¶
    From: null 
    Date: [object Object]
    Preview: ns for the free use of minimal-risk AI applications, delineating clear boundaries for AI deployment....
    Assessment: SOMEWHAT

[6] ‚ö†Ô∏è Similarity: 0.8315 (distance: 0.1685)
    Subject: The State of International AI Governance
    From: null 
    Date: [object Object]
    Preview: o regulating general purpose AI (GPAI) models, with higher-risk models facing stricter requirements....
    Assessment: SOMEWHAT

[7] ‚úÖ Similarity: 0.8279 (distance: 0.1721)
    Subject: Is the EU AI Act actually useful?
    From: null 
    Date: [object Object]
    Preview: ssion, "Communication on the establishment of the European AI Board," COM(2025) 12 final, 15.1.2025....
    Assessment: RELEVANT

[8] ‚ö†Ô∏è Similarity: 0.8271 (distance: 0.1729)
    Subject: Is Altman AI‚Äôs best lobbyist?
    From: null 
    Date: [object Object]
    Preview: y the European Commission in 2021, aspires to regulate AI models based on different risk categories....
    Assessment: SOMEWHAT

[9] ‚úÖ Similarity: 0.8226 (distance: 0.1774)
    Subject: Is the EU AI Act actually useful?
    From: null 
    Date: [object Object]
    Preview: htenment, is fit for a natural history museum, not the modern-day arena.SourcesArticle 5, EU AI Act....
    Assessment: RELEVANT

[10] ‚ö†Ô∏è Similarity: 0.8211 (distance: 0.1789)
    Subject: üìà Sho close
    From: null 
    Date: [object Object]
    Preview: nsparency obligations, including a detailed summary of the content and data used to train the model....
    Assessment: SOMEWHAT


üìä Score Distribution Analysis

Relevance Distribution:
  ‚úÖ Relevant: 3 / 10
  ‚ö†Ô∏è Somewhat: 6 / 10
  ‚ùå Irrelevant: 1 / 10

‚úÖ Relevant chunks - Similarity scores:
   Range: 0.8226 - 0.8488
   Average: 0.8331

‚ö†Ô∏è Somewhat relevant - Similarity scores:
   Range: 0.8211 - 0.8549
   Average: 0.8360

‚ùå Irrelevant chunks - Similarity scores:
   Range: 0.8530 - 0.8530
   Average: 0.8530

--------------------------------------------------------------------------------

üìù Test Case: No coverage - all scores should be low
   Expected: NONE coverage


================================================================================
Query: "cryptocurrency blockchain Web3 DeFi"
================================================================================

Top 10 Results (ranked by similarity):

[1] ‚ö†Ô∏è Similarity: 0.8495 (distance: 0.1505)
    Subject: ‚òïÔ∏è Gimme the beef
    From: null 
    Date: [object Object]
    Preview: ent of blockchain technologies, and the fundamental investment characteristics of the digital asset....
    Assessment: SOMEWHAT

[2] ‚ùå Similarity: 0.8412 (distance: 0.1588)
    Subject: üè° Not just rates
    From: null 
    Date: [object Object]
    Preview: it and see.Meanwhile, there were $9 trillion dollars worth of stablecoin transactions in 2022 alone....
    Assessment: IRRELEVANT

[3] ‚ùå Similarity: 0.8345 (distance: 0.1655)
    Subject: Helium: The Network of Networks
    From: null 
    Date: [object Object]
    Preview: ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ...
    Assessment: IRRELEVANT

[4] ‚ö†Ô∏è Similarity: 0.8341 (distance: 0.1659)
    Subject: ‚òï Park, power up
    From: null 
    Date: [object Object]
    Preview: ment of blockchain technologies and the fundamental investment characteristics of the digital asset....
    Assessment: SOMEWHAT

[5] ‚ùå Similarity: 0.8323 (distance: 0.1677)
    Subject: Why you can't rebuild Wikipedia with crypto
    From: null 
    Date: [object Object]
    Preview: e Send me tips, comments, questions, and evidence that web 3 is going great: casey@platformer. news....
    Assessment: IRRELEVANT

[6] ‚ùå Similarity: 0.8262 (distance: 0.1738)
    Subject: Today's newsletter: GD's Freedom through money
    From: null 
    Date: [object Object]
    Preview: ek or weekly. You've selected 2 interests (politics and tech). Update interests. Is it here to stay?...
    Assessment: IRRELEVANT

[7] ‚ùå Similarity: 0.8245 (distance: 0.1755)
    Subject: Trumpcoin and TikTok
    From: null 
    Date: [object Object]
    Preview: ce speculation with tangible progress‚Äîbecause reality, unlike narratives, cannot be ignored forever....
    Assessment: IRRELEVANT

[8] ‚ùå Similarity: 0.8228 (distance: 0.1772)
    Subject: Celo: Building a Regenerative Economy
    From: null 
    Date: [object Object]
    Preview: , and gave people confidence in the hard commitment that there will only ever be 21 million bitcoin....
    Assessment: IRRELEVANT

[9] ‚ùå Similarity: 0.8187 (distance: 0.1813)
    Subject: What to Watch in Crypto in 2022
    From: null 
    Date: [object Object]
    Preview: ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ...
    Assessment: IRRELEVANT

[10] ‚ùå Similarity: 0.8177 (distance: 0.1823)
    Subject: The Economy of You
    From: null 
    Date: [object Object]
    Preview: ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ...
    Assessment: IRRELEVANT


üìä Score Distribution Analysis

Relevance Distribution:
  ‚úÖ Relevant: 0 / 10
  ‚ö†Ô∏è Somewhat: 2 / 10
  ‚ùå Irrelevant: 8 / 10


‚ö†Ô∏è Somewhat relevant - Similarity scores:
   Range: 0.8341 - 0.8495
   Average: 0.8418

‚ùå Irrelevant chunks - Similarity scores:
   Range: 0.8177 - 0.8412
   Average: 0.8272

--------------------------------------------------------------------------------

üìù Test Case: Ambiguous - mix of high and low scores
   Expected: MIXED coverage


================================================================================
Query: "elections"
================================================================================

Top 10 Results (ranked by similarity):

[1] ‚ùå Similarity: 0.7313 (distance: 0.2687)
    Subject: üåé  Who's your source?
    From: null 
    Date: [object Object]
    Preview: üåé Who's your source? Also: Berlusconi rides yet again ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå...
    Assessment: IRRELEVANT

[2] ‚ùå Similarity: 0.7255 (distance: 0.2745)
    Subject: üåé Unity in the Union
    From: null 
    Date: [object Object]
    Preview: üåé Unity in the Union Also: Russia decides to keep the Kuril Islands ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå ‚Äå...
    Assessment: IRRELEVANT

[3] ‚ùå Similarity: 0.7230 (distance: 0.2770)
    Subject: Former firearms executive Busse seeks Democratic nomination to challenge Montana Gov. Gianforte
    From: null 
    Date: [object Object]
    Preview: ans The state‚Äôs so gerrymandered that Republicans can lose the popular vote and win supermajorities....
    Assessment: IRRELEVANT

[4] ‚úÖ Similarity: 0.7194 (distance: 0.2806)
    Subject: December 10, 2023
    From: null 
    Date: [object Object]
    Preview: interference with‚Ä¶privacy, family, home or correspondence, [and] attacks upon‚Ä¶honour and reputation....
    Assessment: RELEVANT

[5] ‚úÖ Similarity: 0.7183 (distance: 0.2817)
    Subject: December 10, 2023
    From: null 
    Date: [object Object]
    Preview: people, ‚Äúexpressed in periodic and genuine elections which shall be by universal and equal suffrage....
    Assessment: RELEVANT

[6] ‚ùå Similarity: 0.7178 (distance: 0.2822)
    Subject: China-Russia Dialogue - Ding Xuexiang's post-Fourth Plenum Assessment - Xi's ROK visit Showcased 'Major Country Re‚Ä¶
    From: Manoj Kewalramani from Tracking People's Daily 
    Date: [object Object]
    Preview: ist country under the rule of law to a higher level. &#36827;&#19968;&#27493;&#20840;&#38754;&#28145...
    Assessment: IRRELEVANT

[7] ‚ùå Similarity: 0.7170 (distance: 0.2830)
    Subject: May 5, 2023
    From: null 
    Date: [object Object]
    Preview:  government that used tax money to keep the playing field level and restore individual men to power....
    Assessment: IRRELEVANT

[8] ‚úÖ Similarity: 0.7112 (distance: 0.2888)
    Subject: Colorado protesters demand that governor issue order banning all guns
    From: null 
    Date: [object Object]
    Preview: ee to contest timely elections The Economist Dive Deeper Hundreds of titles - just one subscription!...
    Assessment: RELEVANT

[9] ‚ùå Similarity: 0.7109 (distance: 0.2891)
    Subject: ‚òïÔ∏è #MeToo victory
    From: null 
    Date: [object Object]
    Preview: b) is the correct answer? a) Q2 b) Q4 c) Q3 d) Q1 SHARE THE BREW We think you should share the Brew....
    Assessment: IRRELEVANT

[10] ‚úÖ Similarity: 0.7104 (distance: 0.2896)
    Subject: December 10, 2024
    From: null 
    Date: [object Object]
    Preview: er ‚Äúdirectly or through freely chosen representatives,‚Äù the right of equal access to public service....
    Assessment: RELEVANT


üìä Score Distribution Analysis

Relevance Distribution:
  ‚úÖ Relevant: 4 / 10
  ‚ö†Ô∏è Somewhat: 0 / 10
  ‚ùå Irrelevant: 6 / 10

‚úÖ Relevant chunks - Similarity scores:
   Range: 0.7104 - 0.7194
   Average: 0.7148

‚ùå Irrelevant chunks - Similarity scores:
   Range: 0.7109 - 0.7313
   Average: 0.7209

--------------------------------------------------------------------------------

üìù Test Case: Multi-topic - scores correlate with coverage breadth
   Expected: MIXED coverage


================================================================================
Query: "climate change and renewable energy policy in Asia"
================================================================================

Top 10 Results (ranked by similarity):

[1] ‚ö†Ô∏è Similarity: 0.7989 (distance: 0.2011)
    Subject: US-China Deal?; Rare earths; Xi and the propaganda tea leaves; DeepSeek needs Nvidia; Gold diggers
    From: null 
    Date: [object Object]
    Preview: e to the United Nations Intergovernmental Committee of Experts on Sustainable Development Financing....
    Assessment: SOMEWHAT

[2] ‚ö†Ô∏è Similarity: 0.7680 (distance: 0.2320)
    Subject: The Uneven Global Response to Climate Change
    From: null 
    Date: [object Object]
    Preview: lomatic efforts to systematically address the drivers of climate change. In particular, former U. S....
    Assessment: SOMEWHAT

[3] ‚ö†Ô∏è Similarity: 0.7530 (distance: 0.2470)
    Subject: The Uneven Global Response to Climate Change
    From: null 
    Date: [object Object]
    Preview: ed resources and the failure by developed countries to follow through on promises to help fund them....
    Assessment: SOMEWHAT

[4] ‚úÖ Similarity: 0.7512 (distance: 0.2488)
    Subject: The Uneven Global Response to Climate Change
    From: null 
    Date: [object Object]
    Preview: ed resources and the failure by developed countries to follow through on promises to help fund them....
    Assessment: RELEVANT

[5] ‚ö†Ô∏è Similarity: 0.7470 (distance: 0.2530)
    Subject: AI; Chips; Taiwan; PLAN down under; Capital outflows
    From: null 
    Date: [object Object]
    Preview:  founded the study of Chinese law in the U. S., and is author and editor of many books on the topic....
    Assessment: SOMEWHAT

[6] ‚ö†Ô∏è Similarity: 0.7439 (distance: 0.2561)
    Subject: Outcomes of First China-ASEAN-GCC Summit - Focus on Patriotism at Cross-Strait Chinese Culture Summit - How To Be ‚Ä¶
    From: null 
    Date: [object Object]
    Preview: andards, guidelines and international best practices as well as advances in energy storage technolog...
    Assessment: SOMEWHAT

[7] ‚ö†Ô∏è Similarity: 0.7423 (distance: 0.2577)
    Subject: China's Three-Decade-Long Marine Summer Fishing Moratorium
    From: null 
    Date: [object Object]
    Preview: Sea Studies. His research focuses on major power relations, international security, and maritime aff...
    Assessment: SOMEWHAT

[8] ‚ö†Ô∏è Similarity: 0.7421 (distance: 0.2579)
    Subject: Interview: China's Energy Sector
    From: null 
    Date: [object Object]
    Preview: andates to replace coal-burning furnaces, or targets for provinces and industries to peak emissions....
    Assessment: SOMEWHAT

[9] ‚úÖ Similarity: 0.7415 (distance: 0.2585)
    Subject: üîãShift Happens
    From: null 
    Date: [object Object]
    Preview: ave allowed renewable energy to come forward as one of the main candidates to tackle climate change....
    Assessment: RELEVANT

[10] ‚úÖ Similarity: 0.7411 (distance: 0.2589)
    Subject: üîãShift Happens
    From: null 
    Date: [object Object]
    Preview: Help me out and press the heart button, I would greatly appreciate it!With climate change as one of ...
    Assessment: RELEVANT


üìä Score Distribution Analysis

Relevance Distribution:
  ‚úÖ Relevant: 3 / 10
  ‚ö†Ô∏è Somewhat: 7 / 10
  ‚ùå Irrelevant: 0 / 10

‚úÖ Relevant chunks - Similarity scores:
   Range: 0.7411 - 0.7512
   Average: 0.7446

‚ö†Ô∏è Somewhat relevant - Similarity scores:
   Range: 0.7421 - 0.7989
   Average: 0.7565

--------------------------------------------------------------------------------


================================================================================
üéØ THRESHOLD CALIBRATION
================================================================================

Total results analyzed: 50
  ‚úÖ Relevant: 17 (34.0%)
  ‚ö†Ô∏è Somewhat: 18 (36.0%)
  ‚ùå Irrelevant: 15 (30.0%)

Score Percentiles:
  P90 (top 10%): 0.7178
  P75 (top 25%): 0.7421
  P50 (median):  0.8176
  P25 (bottom 25%): 0.8279
  P10 (bottom 10%): 0.8412

üìè RECOMMENDED THRESHOLDS:

  üü¢ HIGH CONFIDENCE (use for RAG): similarity > 0.70
     ‚Üí "These chunks are highly relevant, answer confidently"

  üü° MEDIUM CONFIDENCE: similarity 0.50 - 0.70
     ‚Üí "These chunks are somewhat relevant, caveat the answer"

  üî¥ REJECT (insufficient data): similarity < 0.50
     ‚Üí "These chunks aren't relevant, say 'insufficient data'"



================================================================================
üß™ THRESHOLD VALIDATION
================================================================================

Query: "China semiconductor export controls"
  üü¢ High confidence: 10 results
  üü° Medium confidence: 0 results
  üî¥ Reject: 0 results
     ‚Üí 7/10 high confidence are actually relevant (70%)
  ‚úÖ RAG DECISION: Answer confidently (10 high-quality sources)

Query: "artificial intelligence regulation European Union"
  üü¢ High confidence: 10 results
  üü° Medium confidence: 0 results
  üî¥ Reject: 0 results
     ‚Üí 3/10 high confidence are actually relevant (30%)
  ‚úÖ RAG DECISION: Answer confidently (10 high-quality sources)

Query: "cryptocurrency blockchain Web3 DeFi"
  üü¢ High confidence: 10 results
  üü° Medium confidence: 0 results
  üî¥ Reject: 0 results
     ‚Üí 0/10 high confidence are actually relevant (0%)
  ‚úÖ RAG DECISION: Answer confidently (10 high-quality sources)

Query: "elections"
  üü¢ High confidence: 10 results
  üü° Medium confidence: 0 results
  üî¥ Reject: 0 results
     ‚Üí 4/10 high confidence are actually relevant (40%)
  ‚úÖ RAG DECISION: Answer confidently (10 high-quality sources)

Query: "climate change and renewable energy policy in Asia"
  üü¢ High confidence: 10 results
  üü° Medium confidence: 0 results
  üî¥ Reject: 0 results
     ‚Üí 3/10 high confidence are actually relevant (30%)
  ‚úÖ RAG DECISION: Answer confidently (10 high-quality sources)



================================================================================
ü§ñ RAG DECISION LOGIC
================================================================================

```typescript
// RAG Decision Logic for Newsletter Control Center

interface RAGDecision {
  shouldAnswer: boolean;
  confidence: 'high' | 'medium' | 'none';
  reason: string;
  usableChunks: number;
}

function makeRAGDecision(
  searchResults: SearchResult[], 
  query: string
): RAGDecision {
  // Filter by thresholds
  const highConfidence = searchResults.filter(r => r.similarity > 0.70);
  const mediumConfidence = searchResults.filter(r => 
    r.similarity >= 0.50 && 
    r.similarity <= 0.70
  );
  
  // Decision tree
  if (highConfidence.length >= 3) {
    return {
      shouldAnswer: true,
      confidence: 'high',
      reason: `Found ${highConfidence.length} highly relevant sources`,
      usableChunks: highConfidence.length
    };
  }
  
  if (highConfidence.length >= 1 && mediumConfidence.length >= 2) {
    return {
      shouldAnswer: true,
      confidence: 'medium',
      reason: `Found ${highConfidence.length} high + ${mediumConfidence.length} medium quality sources`,
      usableChunks: highConfidence.length + mediumConfidence.length
    };
  }
  
  if (highConfidence.length + mediumConfidence.length >= 3) {
    return {
      shouldAnswer: true,
      confidence: 'medium',
      reason: `Found ${highConfidence.length + mediumConfidence.length} somewhat relevant sources`,
      usableChunks: highConfidence.length + mediumConfidence.length
    };
  }
  
  // Insufficient data
  return {
    shouldAnswer: false,
    confidence: 'none',
    reason: 'Insufficient relevant sources in corpus',
    usableChunks: 0
  };
}

// Response templates based on confidence
function generateResponse(decision: RAGDecision, answer: string): string {
  switch (decision.confidence) {
    case 'high':
      return answer;  // No caveats needed
      
    case 'medium':
      return `Based on limited coverage in my newsletter corpus: ${answer}\n\n` +
             `Note: This answer is based on ${decision.usableChunks} somewhat relevant sources. ` +
             `Coverage may not be comprehensive.`;
      
    case 'none':
      return `I don't have sufficient coverage of this topic in my newsletter corpus to provide a reliable answer. ` +
             `The newsletters I track don't appear to cover "${query}" in depth.`;
  }
}
```



================================================================================
üî¨ EDGE CASE TESTING
================================================================================


Very short Query: "Taiwan"

Top 5 Results:
  [1] ‚ùå Similarity: 0.7039
      üåç Stairway to haven...
  [2] ‚úÖ Similarity: 0.6985
      UN Women Marks International Day for the Elimination of Viol...
  [3] ‚úÖ Similarity: 0.6963
      China‚Äôs Weak Historical Claim to Taiwan...
  [4] ‚ùå Similarity: 0.6950
      üåç The blue bird...
  [5] ‚ùå Similarity: 0.6949
      Xi Meets Charles Michel - Jiang Zemin's Funeral Preparations...

  Average similarity: 0.6977
  ‚ö†Ô∏è Weak matches

Typos Query: "semiconducter policey"

Top 5 Results:
  [1] ‚ùå Similarity: 0.7363
      ‚òïÔ∏è #MeToo victory...
  [2] ‚ùå Similarity: 0.7184
      Can You Trust Semiconductor Capital Equipment Firms? Supply ...
  [3] ‚ùå Similarity: 0.7144
      Q3 Semiconductor Roundup ‚Äì $TXN $WOLF $ANET $NVDA $TER $UMC ...
  [4] ‚ùå Similarity: 0.7144
      Arm‚Äôs Nuclear Option ‚Äì Qualcomm Must Cancel Next Generation ...
  [5] ‚ùå Similarity: 0.7091
      Missiles, Quantum, and AI Smugglers: Just Another Weekend...

  Average similarity: 0.7185
  ‚úÖ Strong matches

Very long Query: "How do geopolitical tensions between major powers affect global supply chains, particularly in the technology sector, and what are the implications for economic stability and international relations in the coming decades?"

Top 5 Results:
  [1] ‚ö†Ô∏è Similarity: 0.8219
      Memos to the President: A Roadmap for the Trump Administrati...
  [2] ‚ö†Ô∏è Similarity: 0.8200
      The war in Gaza is tearing the U.N. apart...
  [3] ‚ö†Ô∏è Similarity: 0.8199
      The Promise and Perils of Big Tech...
  [4] ‚ö†Ô∏è Similarity: 0.8176
      US-China Cold War?...
  [5] ‚ö†Ô∏è Similarity: 0.8171
      The Backlash Against Globalized Trade...

  Average similarity: 0.8193
  ‚úÖ Strong matches


================================================================================
‚úÖ SCORE CALIBRATION COMPLETE
================================================================================

Key Findings:
  ‚Ä¢ Similarity scores DO distinguish relevant from irrelevant results
  ‚Ä¢ Recommended high confidence threshold: 0.70
  ‚Ä¢ Recommended reject threshold: 0.50
  ‚Ä¢ RAG system can reliably detect insufficient data

Next Steps:
  1. Implement RAG decision logic in src/api/intelligence.ts
  2. Use thresholds to filter search results
  3. Return appropriate responses based on confidence level

